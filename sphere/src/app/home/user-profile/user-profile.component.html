<div *ngIf="loading" class="loading-message">Carregando...</div>

<div *ngIf="errorMessage" class="error-message">
  <p>{{ errorMessage }}</p>
</div>

<div *ngIf="!loading && !errorMessage">
  <!-- Profile Container -->
  <div class="profile-container">
    <div class="profile-header">
      <!-- Profile Image Section -->
      <div class="profile-image-container">
        <img 
          class="profile-picture" 
          [src]="user.profilePicture ? 'http://localhost:3000/uploads/' + user.profilePicture : 'http://localhost:3000/uploads/default-profile.png'" 
          alt="Foto de Perfil de {{ user.username }}" 
          onerror="this.onerror=null;this.src='http://localhost:3000/uploads/default-profile.png';" 
        />
      </div>
    </div>

    <!-- Profile Info Section -->
    <div class="profile-info">
      <div class="profile-info-header">
        <h2 class="username">{{ user.username }}</h2>
      </div>
      
      <div class="profile-stats">
        <span><strong>{{ user.postsCount }}</strong> Publicações</span>
        <span><strong>{{ user.followersCount }}</strong> Seguidores</span>
        <span><strong>{{ user.followingCount }}</strong> Seguindo</span>
      </div>
    </div>
    
    <div class="profile-bio">
      <p>{{ user.bio }}</p>
      <div *ngIf="showFollowButton">
        <button 
          (click)="followUser()" 
          [disabled]="followLoading" 
          [ngClass]="{'clicked': isClicked}" 
          class="follow-button">
          <span *ngIf="followLoading">Processando...</span>
          <span *ngIf="!followLoading">{{ user.isFollowing ? 'Deixar de Seguir' : 'Seguir' }}</span>
        </button>
      </div>
    </div>
  </div>
</div>
